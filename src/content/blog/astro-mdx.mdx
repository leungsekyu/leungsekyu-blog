---
title: æ¸¸ä¹åœº | Astro MDX
description: è®°å½•ä¸€äº› Astro MDX å°è¯•
author: leungsekyu
publishedAt: 2025-01-23 02:21
updatedAt: 2025-02-27 02:03
tags:
  - Astro
  - MDX
imgUrl: '@assets/astro-mdx/cover.webp'
---

import Link from '@components/blog/Link.astro'

# {frontmatter.title}

## 1. Frontmatter å˜é‡

æœ¬ç¯‡æ–‡ç« çš„æ ‡é¢˜æ˜¯ `æ¸¸ä¹åœº | Astro MDX`ï¼Œå¯ä»¥é€šè¿‡ `frontmatter.title` è·å–ã€‚

> æ ‡é¢˜ï¼š{frontmatter.title}

```mdx
> æ ‡é¢˜ï¼š{frontmatter.title}
```

<Link
  site="https://docs.astro.build/zh-cn/guides/integrations-guide/mdx/#%E5%9C%A8-mdx-%E4%B8%AD%E4%BD%BF%E7%94%A8-frontmatter-%E5%8F%98%E9%87%8F"
  name="åœ¨ MDX ä¸­ä½¿ç”¨ Frontmatter å˜é‡"
  favicon="/icons/bookmarks/astro.svg"
  first={true}
/>

## 2. çº¯ CSS å›¾æ ‡

åœ¨ MDX ä¸­å…è®¸ä½¿ç”¨ `div` å…ƒç´ ï¼Œå¹¶ä¸” UnoCSS å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œå› æ­¤å¯ä»¥æ­£å¸¸ä½¿ç”¨åœ¨ `uno.config.ts` é‡Œæ³¨å†Œçš„å›¾æ ‡é›†ï¼ˆé…ç½®æ–¹æ³•è¯·å‚è€ƒä¸‹æ–¹ä»£ç åŠå®˜æ–¹é“¾æ¥ï¼‰ã€‚

#### 1

ä½¿ç”¨ `pnpm` å®‰è£… Astro çš„ UnoCSS é›†æˆ

```zsh
pnpm add -D unocss
```

<Link site="https://unocss.dev/integrations/astro#installation" name="Astro Integration â†’ Installation" first={true} />

#### 2

2.1 ä½¿ç”¨ `pnpm` å®‰è£… `@unocss/reset`ï¼ˆç”¨äºé‡ç½®æµè§ˆå™¨æ ·å¼ï¼‰

```zsh
pnpm add -D @unocss/reset
```

2.2 åœ¨ `astro.config.ts` ä¸­æ³¨å†Œ UnoCSS é›†æˆå¹¶é‡ç½®æµè§ˆå™¨æ ·å¼

```ts
// astro.config.ts
import { defineConfig } from 'astro/config'
import UnoCSS from 'unocss/astro'

export default defineConfig({
  integrations: [
    UnoCSS({
      injectReset: true,
    }),
  ],
})
```

<Link site="https://unocss.dev/integrations/astro#style-reset" name="Astro Integration â†’ Style Reset" first={true} />

#### 3

3.1 ä½¿ç”¨ `pnpm` æ·»åŠ  `@iconify-json/logos` å›¾æ ‡é›†

```zsh
pnpm add -D @iconify-json/logos
```

<Link
  site="https://icones.js.org/collection/logos"
  name="SVG Logos"
  favicon="/icons/bookmarks/icÃ´nes.svg"
  first={true}
/>
<Link
  site="https://icones.js.org/collection/logos?s=mdx&icon=logos:mdx"
  name="logos:mdx"
  favicon="/icons/bookmarks/icÃ´nes.svg"
/>

3.2 åœ¨ `uno.config.ts` ä¸­é…ç½® UnoCSS é¢„è®¾å¹¶æ³¨å†Œå›¾æ ‡é›†

```ts
// uno.config.ts
import { defineConfig, presetWind, presetTypography, presetIcons } from 'unocss'

export default defineConfig({
  presets: [
    presetWind(),
    presetTypography(),
    presetIcons({
      collections: {
        logos: async () => {
          const icons = await import('@iconify-json/logos/icons.json')
          return icons.default
        },
      },
    }),
  ],
})
```

<Link site="https://unocss.dev/presets/wind#wind-preset" name="Wind preset" first={true} />
<Link site="https://unocss.dev/presets/typography#typography-preset" name="Typography preset" />
<Link site="https://unocss.dev/presets/icons#icons-preset" name="Icons preset" />

#### 4

åœ¨ MDX æ–‡ä»¶ä¸­ä½¿ç”¨

```mdx
<div class="i-logos-mdx w-26 h-26 -mb-8 -mt-8"></div>
```

æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹

<div class="i-logos-mdx w-26 h-26 -mb-8 -mt-8"></div>

## 3. Mermaid å›¾è¡¨

> åœ¨ Markdown æ–‡ä»¶ä¸­ä¹Ÿèƒ½ä½¿ç”¨ï¼

### ç”¨æ³•1ï¼šä½¿ç”¨ remark æ’ä»¶ `remark-mermaidjs`

> â­ï¸ æ¨èï¼šæ­¤ç”¨æ³•ç”Ÿæˆçš„ Mermaid å›¾è¡¨æ–‡å­—å¯è¢«é€‰ä¸­å¤åˆ¶ï¼Œäº¤äº’ä½“éªŒæ›´å¥½ã€‚

#### 1

ä½¿ç”¨ `pnpm` æ·»åŠ  `remark-mermaidjs` remark æ’ä»¶

```zsh
pnpm add remark-mermaidjs
```

<Link
  site="https://github.com/remcohaszing/remark-mermaidjs?tab=readme-ov-file#installation"
  name="remark-mermaidjs â†’ Installation"
  first={true}
/>

#### 2

2.1 ä½¿ç”¨ `pnpm` æ·»åŠ  `playwright` è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶

```zsh
pnpm add playwright
```

2.2 ä½¿ç”¨ `playwright` å®‰è£… `chromium` æµè§ˆå™¨å’Œç›¸å…³æ“ä½œç³»ç»Ÿä¾èµ–é¡¹

```zsh
pnpm exec playwright install --with-deps chromium
```

<Link
  site="https://github.com/remcohaszing/remark-mermaidjs?tab=readme-ov-file#installation"
  name="remark-mermaidjs â†’ Installation"
  first={true}
/>
<Link
  site="https://playwright.dev/docs/browsers#install-system-dependencies"
  name="Browsers â†’ Install system dependencies"
  favicon="https://playwright.dev/img/playwright-logo.svg"
/>

#### 3

åœ¨ `astro.config.ts` ä¸­æ³¨å†Œ `remark-mermaidjs` remark æ’ä»¶å¹¶é…ç½® Mermaid å›¾è¡¨ä½¿ç”¨æ‰‹ç»˜é£æ ¼

```ts
// astro.config.ts
import { defineConfig } from 'astro/config'
import remarkMermaid from 'remark-mermaidjs'

export default defineConfig({
  // ...
  markdown: {
    remarkPlugins: [
      [
        remarkMermaid,
        {
          mermaidConfig: {
            look: 'handDrawn',
          },
        },
      ],
    ],
  },
})
```

<Link
  site="https://docs.astro.build/zh-cn/guides/markdown-content/#%E6%B7%BB%E5%8A%A0-remark-%E5%92%8C-rehype-%E6%8F%92%E4%BB%B6"
  name="æ·»åŠ  remark å’Œ rehype æ’ä»¶"
  favicon="/icons/bookmarks/astro.svg"
  first={true}
/>

#### 4

åœ¨ Markdown / MDX æ–‡ä»¶ä¸­ä½¿ç”¨ Mermaid å›¾è¡¨

**è‹±æ–‡**

````mdx
```mermaid
graph LR
  A[Cat] --> B[Cat Pro Max]
```
````

```mermaid
graph LR
  A[Cat] --> B[Cat Pro Max]
```

**ç®€ä½“ä¸­æ–‡**

````mdx
```mermaid
graph LR
  A[çŒ«] --> B[è€è™]
```
````

```mermaid
graph LR
  A[çŒ«] --> B[è€è™]
```

**Emoji**

````mdx
```mermaid
graph LR
  A[ğŸ±] --> B[ğŸ¯]
```
````

```mermaid
graph LR
  A[ğŸ±] --> B[ğŸ¯]
```

**è‹±æ–‡ + Emoji**

````mdx
```mermaid
graph LR
  A[Cat ğŸ±] --> B[Cat Pro Max ğŸ¯]
```
````

```mermaid
graph LR
  A[Cat ğŸ±] --> B[Cat Pro Max ğŸ¯]
```

**ç®€ä½“ä¸­æ–‡ + Emoji**

````mdx
```mermaid
graph LR
  A[çŒ« ğŸ±] --> B[è€è™ ğŸ¯]
```
````

```mermaid
graph LR
  A[çŒ« ğŸ±] --> B[è€è™ ğŸ¯]
```

> âš ï¸ å·²çŸ¥é—®é¢˜ï¼šåœ¨ Netlify éƒ¨ç½²åä¼šå‡ºç°ä¸­æ–‡å’Œ Emoji æ¸²æŸ“ä¸å…¨çš„æƒ…å†µï¼ˆæœ¬ç«™éƒ¨ç½²åœ¨ Netlify ä¸Šï¼‰ï¼Œä½†åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆmacOS Sequoia 15.3.1ï¼‰å‡èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚

> ğŸ’­ æ›´æ–°1ï¼šå¯èƒ½ä¸ Netlify ç”¨æˆ·æ²¡æœ‰æƒé™å®‰è£… Playwright Chromium æµè§ˆå™¨ç›¸å…³æ“ä½œç³»ç»Ÿä¾èµ–é¡¹æœ‰å…³ï¼Œå› ä¸ºåœ¨ Koyeb ä½¿ç”¨ Docker éƒ¨ç½²ï¼ˆå¯ä»¥æ­£å¸¸å®‰è£…ä¾èµ–ï¼‰åæ˜¾ç¤ºæ•ˆæœä¸æœ¬åœ°å¼€å‘ç¯å¢ƒä¸€è‡´ï¼Œå¯ç‚¹å‡»ä¸‹æ–¹é“¾æ¥æŸ¥çœ‹ Koyeb çš„éƒ¨ç½²æ•ˆæœã€‚

<div class="-mt-3">
  <Link
    site="https://leungsekyu.koyeb.app/blog/astro-mdx/"
    name="leungsekyu â†’ æ¸¸ä¹åœº | Astro MDXï¼ˆéƒ¨ç½²åœ¨ Koyebï¼‰"
    favicon="/favicon/favicon.svg"
  />
</div>

> ğŸ§ åç»­å°è¯•ï¼šä½¿ç”¨ Puppeteer æ›¿ä»£ Playwright æ¸²æŸ“ Mermaid å›¾è¡¨ã€‚

### ç”¨æ³•2ï¼šä½¿ç”¨ Mermaid Live Editor

<Link site="https://mermaid.live/edit/" name="Mermaid Live Editor" />

> ğŸª§ æç¤ºï¼šéœ€è¦åœ¨æ¡Œé¢ç«¯æµè§ˆå™¨æ‰“å¼€

#### ä½¿ç”¨æ–¹æ³•

ç¼–è¾‘å›¾è¡¨ååœ¨å·¦ä¸‹æ–¹çš„ Actions æŠ˜å æ ä¸­é€‰æ‹©å¯¼å‡º SVG å›¾ç‰‡æˆ–è€…ç›´æ¥ä½¿ç”¨ç”Ÿæˆçš„ SVG å›¾ç‰‡ URL

**è‹±æ–‡**

```text
%%{init: {'look': 'handDrawn'}}%%
graph LR
  A[Cat] --> B[Cat Pro Max]
```

ä½¿ç”¨å¯¼å‡ºçš„ SVG å›¾ç‰‡

![](@assets/astro-mdx/mermaid/en.svg)

ä½¿ç”¨ç”Ÿæˆçš„ SVG å›¾ç‰‡ URL
![](https://mermaid.ink/svg/pako:eNo9j8EKwjAQRH9lWSi9tD-Qg6D2aEH0pulhadI22GRLTFAp_XdTRW9v4DHDzNiy0igwy2bjTBAw5yPzLReQD-RU5enh8mXJMul6T9MAh5N0ANvrnkIDZbmB3Ypw9Aw1PRss0GpvyahUOq-qxDBoqyWKhEp3FMcgUbolqRQDn1-uRRF81AV6jv2AoqPxnlKcFAVdGUrL9qdM5C7M9i9pZQL7-vvic2Z5A9cVRq0)

<div class="-mt-3 mb-7">
  <Link
    site="https://mermaid.live/edit#pako:eNo9j8EKwjAQRH9lWSi9tD-Qg6D2aEH0pulhadI22GRLTFAp_XdTRW9v4DHDzNiy0igwy2bjTBAw5yPzLReQD-RU5enh8mXJMul6T9MAh5N0ANvrnkIDZbmB3Ypw9Aw1PRss0GpvyahUOq-qxDBoqyWKhEp3FMcgUbolqRQDn1-uRRF81AV6jv2AoqPxnlKcFAVdGUrL9qdM5C7M9i9pZQL7-vvic2Z5A9cVRq0"
    name="Mermaid Live Editor â†’ è‹±æ–‡"
  />
</div>

**è‹±æ–‡ + Emoji**

```text
%%{init: {'look': 'handDrawn'}}%%
graph LR
  A[Cat ğŸ±] --> B[Cat Pro Max ğŸ¯]
```

ä½¿ç”¨å¯¼å‡ºçš„ SVG å›¾ç‰‡

![](@assets/astro-mdx/mermaid/en-emoji.svg)

ä½¿ç”¨ç”Ÿæˆçš„ SVG å›¾ç‰‡ URL
![](https://mermaid.ink/svg/pako:eNpFj00KwjAQha8yDJRu2gtkIfiztCC607gYmtgG20yJCSqld_AGHkG8mUcwVtDd-x5vhvd6LFlpFJgkvbHGC-jThvmYCkhrsmrh6GzTYUgSaStHXQ3LtbQA092cPLzut-ce8nwCs5FXjqGgy8d_7DHDVruWjIrv-8-RRF_rVksUUSp9oNB4idIOMUrB8-ZqSxTeBZ2h41DVKA7UnCKFTpHXC0OxQ_tzO7Jb5j9rZTy74jto3DW8AWdGTNY)

<div class="-mt-3 mb-7">
  <Link
    site="https://mermaid.live/edit#pako:eNpFj00KwjAQha8yDJRu2gtkIfiztCC607gYmtgG20yJCSqld_AGHkG8mUcwVtDd-x5vhvd6LFlpFJgkvbHGC-jThvmYCkhrsmrh6GzTYUgSaStHXQ3LtbQA092cPLzut-ce8nwCs5FXjqGgy8d_7DHDVruWjIrv-8-RRF_rVksUUSp9oNB4idIOMUrB8-ZqSxTeBZ2h41DVKA7UnCKFTpHXC0OxQ_tzO7Jb5j9rZTy74jto3DW8AWdGTNY"
    name="Mermaid Live Editor â†’ è‹±æ–‡ + Emoji"
  />
</div>

**ä¸­æ–‡ + Emoji**

```text
%%{init: {'look': 'handDrawn'}}%%
graph LR
  A[çŒ« ğŸ±] --> B[è€è™ ğŸ¯]
```

ä½¿ç”¨å¯¼å‡ºçš„ SVG å›¾ç‰‡

![](@assets/astro-mdx/mermaid/zh-CN-emoji.svg)

ä½¿ç”¨ç”Ÿæˆçš„ SVG å›¾ç‰‡ URL
![](https://mermaid.ink/svg/pako:eNo9j7EKwjAYhF8l_FC6tC-QQVA66qKbTYefJtpgk5SYIFIKuou4OvkADuJT2dFHMCq63R0fd1wLpeECKERRK7V0lLRxbcwqpiSuUPPM4kbHXRdFTC8tNhUZT5kmZJg_DlfyvJzuBUnTARnl_W7fn4_v6FZAAkpYhZKH5vbNM3CVUIIBDZKLBfraMWC6Cyh6Z2ZbXQJ11osErPHLCugC63VwvuHoRCYxzKsf0qCeG6P-kODSGTv5Xvk86l5lAE3a)

<div class="-mt-3 mb-7">
  <Link
    site="https://mermaid.live/edit#pako:eNo9j7EKwjAYhF8l_FC6tC-QQVA66qKbTYefJtpgk5SYIFIKuou4OvkADuJT2dFHMCq63R0fd1wLpeECKERRK7V0lLRxbcwqpiSuUPPM4kbHXRdFTC8tNhUZT5kmZJg_DlfyvJzuBUnTARnl_W7fn4_v6FZAAkpYhZKH5vbNM3CVUIIBDZKLBfraMWC6Cyh6Z2ZbXQJ11osErPHLCugC63VwvuHoRCYxzKsf0qCeG6P-kODSGTv5Xvk86l5lAE3a"
    name="Mermaid Live Editor â†’ ä¸­æ–‡ + Emoji"
  />
</div>

> âš ï¸ å·²çŸ¥é—®é¢˜ï¼šä½¿ç”¨å¯¼å‡ºçš„ SVG å›¾ç‰‡ä¼šåœ¨ç§»åŠ¨ç«¯å‡ºç° Emoji å³ä¾§æœ‰å°‘è®¸é®æŒ¡çš„æƒ…å†µï¼ŒåŸå› ä¸æ˜ã€‚

### æ€»ç»“

æ— è®ºé‡‡ç”¨å“ªç§ç”¨æ³•ï¼Œå‡å»ºè®®ä½¿ç”¨è‹±æ–‡ï¼Œå…¼å®¹æ€§æœ€å¥½ã€‚
